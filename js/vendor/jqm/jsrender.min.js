/* JsRender v1.0pre: http://github.com/BorisMoore/jsrender */
(function(y,h,a){"use strict";if(h&&h.views||y.jsviews)return;var O="v1.0pre",c,v,n,E,o="{",p="{",e="}",j="}",r="^",fb=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,cb=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*((\))(?=\s*\.|\s*\^)|\)|\])([([]?))|(\s+)/g,w=/\s*\n/g,L=/\\(['"])/g,N=/([\\'"])/g,X=/\x08(~)?([^\x08]+)\x08/g,U=/^if\s/,Y=/<(\w+)[>\s]/,gb=/<(\w+)[^>\/]*>[^>]*$/,S=/[><"'&]/g,T=/[><"'&]/g,P=0,db=0,Q={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;"},I="data-jsv-tmpl",ib=[].slice,x={},l={template:{compile:C},tag:{compile:V},helper:{},converter:{}},b={jsviews:O,render:x,settings:{delimiters:z,debugMode:true,tryCatch:true},sub:{View:s,Error:u,tmplFn:J,parse:D,extend:g,error:m,syntaxError:f},_cnvt:W,_tag:ab,_err:function(a){return k.debugMode?"Error: "+(a.message||a)+". ":""}};function u(b,a){if(a&&a.onError)if(a.onError(b)===false)return;this.name="JsRender Error";this.message=b||"JsRender error"}function g(a,c){var b;a=a||{};for(b in c)a[b]=c[b];return a}(u.prototype=new Error).constructor=u;function z(b,a,c){if(!q.rTag||arguments.length){o=b?b.charAt(0):o;p=b?b.charAt(1):p;e=a?a.charAt(0):e;j=a?a.charAt(1):j;r=c||r;b="\\"+o+"(\\"+r+")?\\"+p;a="\\"+e+"\\"+j;n="(?:(?:(\\w+(?=[\\/\\s\\"+e+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+e+"]|\\"+e+"(?!\\"+j+"))*?)";q.rTag=n+")";n=new RegExp(b+n+"(\\/)?|(?:\\/(\\w+)))"+a,"g");E=new RegExp("<.*>|([^\\\\]|^)[{}]|"+b+".*"+a)}return[o,p,e,j,r]}function bb(f,d){if(!d){d=f;f=a}var g,e,h,c,b=this,i=!d||d==="root";if(f){c=b.type===d?b:a;if(!c){g=b.views;if(b._.useKey){for(e in g)if(c=g[e].get(f,d))break}else for(e=0,h=g.length;!c&&e<h;e++)c=g[e].get(f,d)}}else if(i)while(b.parent.parent)c=b=b.parent;else while(b&&!c){c=b.type===d?b:a;b=b.parent}return c}function H(){var b=this.get("item");return b?b.index:a}H.depends=function(){return[this.get("item"),"index"]};function Z(e){var c,d=this,b=(d.ctx||{})[e];b=b===a?d.getRsc("helpers",e):b;if(b)if(typeof b==="function"){c=function(){return b.apply(d,arguments)};g(c,b)}return c||b}function W(f,d,c){var k,e,j,g=+c===c&&c,h=d.linkCtx;if(g)c=(g=d.tmpl.bnds[g-1])(d.data,d,b);j=c.args[0];if(f||g){e=h&&h.tag||{_:{inline:!h},tagName:f+":",flow:true,_is:"tag"};e._.bnd=g;if(h){h.tag=e;e.linkCtx=h;c.ctx=i(c.ctx,h.view.ctx)}e.tagCtx=c;c.view=d;e.ctx=c.ctx||{};delete c.ctx;d._.tag=e;f=f!=="true"&&f;if(f&&((k=d.getRsc("converters",f))||m("Unknown converter: {{"+f+":"))){e.depends=k.depends;j=k.apply(e,c.args)}j=g&&d._.onRender?d._.onRender(j,d,g):j;d._.tag=a}return j}function R(f,g){var e,d=this,c=b[f];e=c&&c[g];while(e===a&&d){c=d.tmpl[f];e=c&&c[g];d=d.parent}return e}function ab(n,f,h,l){var C,c,D,x,F,u,j,y,w,e,v,r,z,o,q="",s=+l===l&&l,k=f.linkCtx||0,p=f.ctx,A=h||f.tmpl,E=f._;if(n._is==="tag"){c=n;n=c.tagName}if(s)l=(z=A.bnds[s-1])(f.data,f,b);y=l.length;c=c||k.tag;for(j=0;j<y;j++){e=l[j];r=e.tmpl;r=e.content=r&&A.tmpls[r-1];h=e.props.tmpl;if(!j&&(!h||!c))o=f.getRsc("tags",n)||m("Unknown tag: {{"+n+"}}");h=h||!j&&o.template||r;h=""+h===h?f.getRsc("templates",h)||d(h):h;g(e,{tmpl:h,render:t,index:j,view:f,ctx:i(e.ctx,p)});if(!c){if(o.init){c=new o.init(e,k,p);c.attr=c.attr||o.attr||a}else c={render:o.render};c._={inline:!k};if(k){k.attr=c.attr=k.attr||c.attr;k.tag=c;c.linkCtx=k}if(c._.bnd=z||k)c._.arrVws={};c.tagName=n;c.parent=u=p&&p.tag,c._is="tag"}E.tag=c;e.tag=c;c.tagCtxs=l;c.rendering={};if(!c.flow){v=e.ctx=e.ctx||{};D=v.parentTags=p&&i(v.parentTags,p.parentTags)||{};if(u)D[u.tagName]=u;v.tag=c}}for(j=0;j<y;j++){e=c.tagCtx=l[j];c.ctx=e.ctx;if(C=c.render)w=C.apply(c,e.args);q+=w!==a?w:e.tmpl?e.render():""}delete c.rendering;c.tagCtx=c.tagCtxs[0];c.ctx=c.tagCtx.ctx;if(c._.inline&&(x=c.attr)&&x!=="html")q=x==="text"?B.html(q):"";return q=s&&f._.onRender?f._.onRender(q,f,s):q}function s(i,j,b,o,n,k,l,m){var f,d,g,h=j==="array",e={key:0,useKey:h?0:1,id:""+db++,onRender:m,bnds:{}},c={data:o,tmpl:n,content:l,views:h?[]:{},parent:b,ctx:i,type:j,"get":bb,getIndex:H,getRsc:R,hlp:Z,_:e,_is:"view"};if(b){f=b.views;d=b._;if(d.useKey){f[e.key="_"+d.useKey++]=c;g=d.tag;e.bnd=h&&(!g||!!g._.bnd&&g)}else f.splice(e.key=c.index=k!==a?k:f.length,0,c);c.ctx=i||b.ctx}return c}function K(e){var c,b,a,d,f;for(c in l){d=l[c];if((f=d.compile)&&(b=e[c+"s"]))for(a in b)b[a]=f(a,b[a],e,c,d)}}function V(f,a,e){var c,b;if(typeof a==="function")a={depends:a.depends,render:a};else{if(b=a.template)a.template=""+b===b?d[b]||d(b):b;if(a.init!==false){c=a.init=a.init||function(){};c.prototype=a;(c.prototype=a).constructor=c}}if(e)a._parentTmpl=e;return a}function C(e,b,j,m,l,f){function k(a){if(""+a===a||a.nodeType>0){try{g=a.nodeType>0?a:!E.test(a)&&h&&h(y.document).find(a)[0]}catch(b){}if(g){a=g.getAttribute(I);e=e||a;a=d[a];if(!a){e=e||"_"+P++;g.setAttribute(I,e);a=d[e]=C(e,g.innerHTML,j,m,l,f)}}return a}}var c,g;b=b||"";c=k(b);f=f||(b.markup?b:{});f.tmplName=e;if(j)f._parentTmpl=j;if(!c&&b.markup&&(c=k(b.markup)))if(c.fn&&(c.debug!==b.debug||c.allowCode!==b.allowCode))c=c.markup;if(c!==a){if(e&&!j)x[e]=function(){return b.render.apply(b,arguments)};if(c.fn||b.fn){if(c.fn)if(e&&e!==c.tmplName)b=i(f,c);else b=c}else{b=F(c,f);J(c,b)}K(f);return b}}function F(f,d){var a,e=k.wrapMap||{},b=g({markup:f,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:t},d);if(!d.htmlTag){a=Y.exec(f);b.htmlTag=a?a[1].toLowerCase():""}a=e[b.htmlTag];if(a&&a!==e.div){b.markup=c.trim(b.markup);b._elCnt=true}return b}function M(c,d){function f(g,h,j){var l,i,m,k;if(g&&""+g!==g&&!g.nodeType&&!g.markup){for(m in g)f(m,g[m],h);return b}if(h===a){h=g;g=a}if(g&&""+g!==g){j=h;h=g;g=a}k=j?(j[e]=j[e]||{}):f;i=d.compile;if(l=q.onBeforeStoreItem)i=l(k,g,h,i)||i;if(!g)h=i(a,h);else if(h===null)delete k[g];else k[g]=i?(h=i(g,h,j,c,d)):h;if(h)h._is=c;(l=q.onStoreItem)&&l(k,g,h,i);return h}var e=c+"s";b[e]=f;l[c]=d}function t(f,h,e,o,y,k){var q,B,x,l,w,v,u,p,n,A,r,z,j,g=this,C=!g.attr||g.attr==="html",t="";if(o===true){u=true;o=0}if(g.tag){p=g;g=g.tag;A=g._;z=g.tagName;j=p.tmpl;h=i(h,g.ctx);n=p.content;if(p.props.link===false){h=h||{};h.link=false}e=e||p.view;f=f===a?e:f}else j=g.jquery&&(g[0]||m('Unknown template: "'+g.selector+'"'))||g;if(j){if(!e&&f&&f._is==="view")e=f;if(e){n=n||e.content;k=k||e._.onRender;if(f===e){f=e.data;y=true}h=i(h,e.ctx)}if(!e||e.data===a)(h=h||{}).root=f;if(!j.fn)j=d[j]||d(j);if(j){k=(h&&h.link)!==false&&C&&k;r=k;if(k===true){r=a;k=e._.onRender}if(c.isArray(f)&&!y){l=u?e:o!==a&&e||s(h,"array",e,f,j,o,n,k);for(q=0,B=f.length;q<B;q++){x=f[q];w=s(h,"item",l,x,j,(o||0)+q,n,k);v=j.fn(x,w,b);t+=l._.onRender?l._.onRender(v,w):v}}else{l=u?e:s(h,z||"data",e,f,j,o,n,k);if(A&&!g.flow)l.tag=g;t+=j.fn(f,l,b)}return r?r(t,l):t}}return""}function m(a){if(k.debugMode)throw new b.sub.Error(a);}function f(a){m("Syntax error\n"+a)}function J(c,j,l,m){function k(a){a-=b;a&&d.push(c.substr(b,a).replace(w,"\\n"))}function h(a){a&&f('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+c)}function p(G,E,n,z,x,F,C,B,e,y,p,q){if(F){x=":";z="html"}y=y||l;var A,u,s=E&&[],r="",j="",t="",v=!y&&!x&&!C;n=n||x;k(q);b=q+G.length;if(B)o&&d.push(["*","\n"+e.replace(L,"$1")+"\n"]);else if(n){if(n==="else"){U.test(e)&&f('for "{{else if expr}}" use "{{else expr}}"');s=a[6];a[7]=c.substring(a[7],q);a=g.pop();d=a[3];v=true}if(e){e=e.replace(w," ");r=D(e,s).replace(X,function(c,b,a){if(b)t+=a+",";else j+=a+",";return""})}j=j.slice(0,-1);r=r.slice(0,-1);A=j&&j.indexOf("noerror:true")+1&&j||"";i=[n,z||!!m||"",r,v&&[],'params:"'+e+'",props:{'+j+"}"+(t?",ctx:{"+t.slice(0,-1)+"}":""),A,s||0];d.push(i);if(v){g.push(a);a=i;a[7]=b}}else if(p){u=a[0];h(p!==u&&u!=="else"&&p);a[7]=c.substring(a[7],q);a=g.pop()}h(!a&&p);d=a[3]}var i,o=j&&j.allowCode,e=[],b=0,g=[],d=e,a=[,,,e];c=c.replace(N,"\\$1");h(g[0]&&g[0][3].pop()[0]);c.replace(n,p);k(c.length);(b=e[e.length-1])&&h(""+b!==b&&+b[7]===b[7]&&b[0]);return G(e,j||c,l)}function G(C,d,i){var j,c,b,l,n,t,I,D,E,y,o,e,L,O,A,m,v,p,M,x,K,P,q,H,J,B,z,r,g=0,a="",s="",u={},N=C.length;if(""+d===d){m=i?'data-link="'+d.replace(w," ").slice(1,-1)+'"':d;d=0}else{m=d.tmplName||"unnamed";if(M=d.allowCode)u.allowCode=true;if(d.debug)u.debug=true;o=d.bnds;A=d.tmpls}for(j=0;j<N;j++){c=C[j];if(""+c===c)a+='\nret+="'+c+'";';else{b=c[0];if(b==="*")a+=""+c[1];else{l=c[1];n=c[2];x=c[3];t=c[4];s=c[5];K=c[7];if(!(J=b==="else")){g=0;if(o&&(e=c[6]))g=o.push(e)}if(B=b===":"){if(l)b=l==="html"?">":l+b;if(s){z="prm"+j;s="try{var "+z+"=["+n+"][0];}catch(e){"+z+'="";}\n';n=z}}else{if(x){v=F(K,u);v.tmplName=m+"/"+b;G(x,v);A.push(v)}if(!J){p=b;H=a;a="";L=j}q=C[j+1];q=q&&q[0]==="else"}t+=",args:["+n+"]}";if(B&&e||l&&b!==">"){r=new Function("data,view,j,u"," // "+m+" "+g+" "+b+"\n"+s+"return {"+t+";");r.paths=e;r._ctxs=b;if(i)return r;y=true}a+=B?"\n"+(e?"":s)+(i?"return ":"ret+=")+(y?(y=true,'c("'+l+'",view,'+(e?(o[g-1]=r,g):"{"+t)+");"):b===">"?(D=true,"h("+n+");"):(E=true,"(v="+n+")!="+(i?"=":"")+'u?v:"";')):(I=true,"{tmpl:"+(x?A.length:"0")+","+t+",");if(p&&!q){a="["+a.slice(0,-1)+"]";if(i||e){a=new Function("data,view,j,u"," // "+m+" "+g+" "+p+"\nreturn "+a+";");if(e)(o[g-1]=a).paths=e;a._ctxs=b;if(i)return a}a=H+'\nret+=t("'+p+'",view,this,'+(g||a)+");";e=0;p=0}}}}a="// "+m+"\nvar j=j||"+(h?"jQuery.":"js")+"views"+(E?",v":"")+(I?",t=j._tag":"")+(y?",c=j._cnvt":"")+(D?",h=j.converters.html":"")+(i?";\n":',ret="";\n')+(k.tryCatch?"try{\n":"")+(u.debug?"debugger;":"")+a+(i?"\n":"\nreturn ret;\n")+(k.tryCatch?"\n}catch(e){return j._err(e);}":"");try{a=new Function("data,view,j,u",a)}catch(Q){f("Compiled template code:\n\n"+a,Q)}if(d)d.fn=a;return a}function D(e,b){function k(t,o,n,k,m,D,E,z,l,y,w,r,s,q,v,C,A,p,B){m=m||"";n=n||o||w;k=k||z;b&&v&&b.push({_jsvOb:B.slice(j[a-1]+1,p+1)});l=l||C||"";function u(j,e,d,g,f,i,c){if(e){b&&!h&&b.push(k);if(e!=="."){var a=(d?'view.hlp("'+d+'")':g?"view":"data")+(c?(f?"."+f:d?"":g?"":"."+e)+(i||""):(c=d?"":g?f||"":e,""));a=a+(c?"."+c:"");return a.slice(0,9)==="view.data"?a.slice(5):a}}return j}if(D)f(e);else return c?(c=!r,c?t:'"'):g?(g=!s,g?t:'"'):(n?(a++,j[a]=p,n):"")+(A?a?"":i?(i=h=false,"\b"):",":E?(a&&f(e),i=k,h=k.charAt(0)==="~","\b"+k+":"):k?k.split("^").join(".").replace(fb,u)+(l?(d[++a]=true,l):m):m?m:q?(d[a--]=false,q)+(l?(d[++a]=true,l):""):y?(d[a]||f(e),","):o?"":(c=r,g=s,'"'))}var i,h,d={},j={0:-1},a=0,g=false,c=false;return(e+" ").replace(cb,k)}function i(b,a){return b&&b!==a?a?g(g({},a),b):b:a&&g({},a)}for(v in l)M(v,l[v]);var d=b.templates,B=b.converters,hb=b.helpers,eb=b.tags,q=b.sub,k=b.settings;if(h){c=h;c.fn.render=t}else{c=y.jsviews={};c.isArray=Array&&Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}}c.render=x;c.views=b;c.templates=d=b.templates;eb({"else":function(){},"if":{render:function(c){var a=this,b=a.rendering.done||!c&&(arguments.length||!a.tagCtx.index)?"":(a.rendering.done=true,a.selected=a.tagCtx.index,a.tagCtx.render());return b},onUpdate:function(f,e,d){for(var a,b,c=0;(a=this.tagCtxs[c])&&a.args.length;c++){a=a.args[0];b=!a!==!d[c].args[0];if(!!a||b)return b}return false},flow:true},"for":{render:function(d){var j,i,b=this,f=b.tagCtx,g=!arguments.length,e="",h=g||0;if(!b.rendering.done){if(g)e=a;else if(d!==a){e+=f.render(d);h+=c.isArray(d)?d.length:1}if(b.rendering.done=h)b.selected=f.index}return e},onUpdate:function(){},onArrayChange:function(b,c){var a,e=this,d=c.change;if(this.tagCtxs[1]&&(d==="insert"&&b.target.length===c.items.length||d==="remove"&&!b.target.length||d==="refresh"&&!c.oldItems.length!==!b.target.length))this.refresh();else for(a in e._.arrVws){a=e._.arrVws[a];a.data===b.target&&a._.onArrayChange.apply(a,arguments)}b.done=true},flow:true},include:{flow:true},"*":{render:function(a){return a},flow:true}});function A(a){return Q[a]}B({html:function(b){return b!=a?String(b).replace(T,A):""},attr:function(b){return b!=a?String(b).replace(S,A):b===null?null:""},url:function(b){return b!=a?encodeURI(String(b)):b===null?null:""}});z()})(this,this.jQuery)