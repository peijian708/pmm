define(["module"],function(f){"use strict";var a,g,e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,k=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c=typeof location!=="undefined"&&location.href,i=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,j=c&&(location.port||undefined),d=[],b=f.config&&f.config()||{};a={version:"2.0.3",strip:function(a){if(a){a=a.replace(l,"");var b=a.match(k);if(b)a=b[1]}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:b.createXhr||function(){var c,a,b;if(typeof XMLHttpRequest!=="undefined")return new XMLHttpRequest;else if(typeof ActiveXObject!=="undefined")for(a=0;a<3;a+=1){b=e[a];try{c=new ActiveXObject(b)}catch(d){}if(c){e=[b];break}}return c},parseName:function(d){var c=false,a=d.indexOf("."),e=d.substring(0,a),b=d.substring(a+1,d.length);a=b.indexOf("!");if(a!==-1){c=b.substring(a+1,b.length);c=c==="strip";b=b.substring(0,a)}return{moduleName:e,ext:b,strip:c}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(i,g,f,h){var c,b,e,d=a.xdRegExp.exec(i);if(!d)return true;c=d[2];b=d[3];b=b.split(":");e=b[1];b=b[0];return(!c||c===g)&&(!b||b.toLowerCase()===f.toLowerCase())&&(!e&&!b||e===h)},finishLoad:function(g,f,c,e){c=f?a.strip(c):c;if(b.isBuild)d[g]=c;e(c)},load:function(k,l,e,f){if(f.isBuild&&!f.inlineText){e();return}b.isBuild=f.isBuild;var d=a.parseName(k),g=d.moduleName+"."+d.ext,m=l.toUrl(g),n=b.useXhr||a.useXhr;if(!c||n(m,i,h,j))a.get(m,function(b){a.finishLoad(k,d.strip,b,e)},function(a){e.error&&e.error(a)});else l([g],function(b){a.finishLoad(d.moduleName+"."+d.ext,d.strip,b,e)})},write:function(c,b,f){if(d.hasOwnProperty(b)){var e=a.jsEscape(d[b]);f.asModule(c+"!"+b,"define(function () { return '"+e+"';});\n")}},writeFile:function(i,h,g,f,e){var b=a.parseName(h),c=b.moduleName+"."+b.ext,d=g.toUrl(b.moduleName+"."+b.ext)+".js";a.load(c,g,function(){var b=function(a){return f(d,a)};b.asModule=function(a,b){return f.asModule(a,d,b)};a.write(i,c,b,e)},e)}};if(b.env==="node"||!b.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node){g=require.nodeRequire("fs");a.get=function(c,b){var a=g.readFileSync(c,"utf8");if(a.indexOf("ï»¿")===0)a=a.substring(1);b(a)}}else if(b.env==="xhr"||!b.env&&a.createXhr())a.get=function(d,e,f){var c=a.createXhr();c.open("GET",d,true);if(b.onXhr)b.onXhr(c,d);c.onreadystatechange=function(){var a,b;if(c.readyState===4){a=c.status;if(a>399&&a<600){b=new Error(d+" HTTP status: "+a);b.xhr=c;f(b)}else e(c.responseText)}};c.send(null)};else if(b.env==="rhino"||!b.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")a.get=function(i,f){var b,a,g="utf-8",h=new java.io.File(i),e=java.lang.System.getProperty("line.separator"),c=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(h),g)),d="";try{b=new java.lang.StringBuffer;a=c.readLine();if(a&&a.length()&&a.charAt(0)===65279)a=a.substring(1);b.append(a);while((a=c.readLine())!==null){b.append(e);b.append(a)}d=String(b.toString())}finally{c.close()}f(d)};return a})